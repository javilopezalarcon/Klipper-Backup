### LOAD_FILAMENT_T
# Usage: LOAD_FILAMENT_T [TYPE=<material type>]
[gcode_macro LOAD_FILAMENT_T]
description: Loads the filament setting the right temperature by material type
gcode:
  {% set TYPE = params.TYPE|default("PLA")|string %}
  {% if TYPE == "PLA" %}
    LOAD_FILAMENT TEMP={printer["gcode_macro GLOBAL_VARS"].preheat_pla_temp}
  {% else %}
    RESPOND TYPE=error MSG='Unknown type: {TYPE}'
  {% endif %}

### UNLOAD_FILAMENT_T
# Usage: UNLOAD_FILAMENT_T [TYPE=<material type>]
[gcode_macro UNLOAD_FILAMENT_T]
description: Unloads the filament setting the right temperature by material type
gcode:
  {% set TYPE = params.TYPE|default("PLA")|string %}
  {% if TYPE == "PLA" %}
    UNLOAD_FILAMENT TEMP={printer["gcode_macro GLOBAL_VARS"].preheat_pla_temp}
    BEEP R=3
  {% else %}
    RESPOND TYPE=error MSG='Unknown type: {TYPE}'
  {% endif %}

####################################################################

[gcode_macro LEDOFF]
gcode:  SET_PIN PIN=Luz_Impresora_3D VALUE=0

[gcode_macro LEDON]
gcode:  SET_PIN PIN=Luz_Impresora_3D VALUE=1

[gcode_shell_command Backup_Github_Klipper]
command: sh /home/javi/printer_data/config/3dwork-autocommit.sh
timeout: 30.
verbose: True

[gcode_macro Backup_Github_Klipper]
gcode:
    RUN_SHELL_COMMAND CMD=Backup_Github_Klipper

[gcode_macro M600]
gcode:
  {% set X = params.X|default(50)|float %}
  {% set Y = params.Y|default(0)|float %}
  {% set Z = params.Z|default(10)|float %}
  SAVE_GCODE_STATE NAME=M600_state
  PAUSE
  BEEP
  G91
  G1 E-0.8 F2700
  G1 Z{Z}
  G90
  G1 X{X} Y{Y} F3000
  G91
  G1 E-50 F1000
  Restore_GCODE_STATE NAME=M600_state